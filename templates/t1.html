<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf8">
		<title>Untitled Document</title>
		<style type="text/css">
			html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
			    position: relative;
			    margin: 0;
			    padding: 0;
			    border: 0;
			    font-family: arial;
			    font-size: inherit;
			    line-height: 100%;
			    vertical-align: middle;
			}
			
			article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {
			    display: block;
			}
			
			html, body {
			    width: 100%;
			    height: 100%;
			    min-height: 600px;
			    min-width: 800px;
			    color: #818181;
			    background-color: #0e0e0e;
			}
			
			ol, ul {
			    list-style: none;
			}
			
			blockquote, q {
			    quotes: none;
			}
			
			blockquote:before, blockquote:after, q:before, q:after {
			    content: '';
			    content: none;
			}
			
			table {
			    border-collapse: collapse;
			    border-spacing: 0;
			}
			
			.outer {
			    position: absolute;
			    background-color: #2f2f2f;
			    margin: 1.5em;
			    padding: .7em;
			}
			
			.left {
			    background-color: #383838;
			    float: left;
			    width: 70%;
			}
			
			.right {
			    float: right;
			    width: 30%;
			}
			
			.right .layout {
			    margin-left: .7em;
			}
			
			.calendar {
			    color: #ffffff;
			    background-color: #0e0e0e;
			    text-align: center;
			    overflow: hidden;
			    font-weight: bold;
			}
			
			.calendar .time {
			    margin: -0.15em -50%;
			    font-size: 700%;
			}
			
			.calendar .date {
			    margin: -0.15em -50%;
			    font-size: 200%;
			}
			
			.innershadow {
			    position: absolute;
			    top: 0px;
			    left: 0px;
			    -moz-border-image: url("img/inner_shadow.png") 30 30 repeat; /* Firefox */
			    -webkit-border-image: url("img/inner_shadow.png") 30 30 repeat; /* Safari and Chrome */
			    -o-border-image: url("img/inner_shadow.png") 30 30 repeat; /* Opera */
			    -border-image: url("img/inner_shadow.png") 30 30 repeat;
			}
			
			.innershadow.round {
			    position: absolute;
			    top: 0px;
			    left: 0px;
			    -moz-border-image: url("img/inner_shadow_round.png") 30 30 repeat; /* Firefox */
			    -webkit-border-image: url("img/inner_shadow_round.png") 30 30 repeat; /* Safari and Chrome */
			    -o-border-image: url("img/inner_shadow_round.png") 30 30 repeat; /* Opera */
			    -border-image: url("img/inner_shadow_round.png") 30 30 repeat;
			}
			
			.inset {
			    position: absolute;
			    top: 0px;
			    left: 0px;
			    -moz-border-image: url("img/inset_round.png") 30 30 stretch; /* Firefox */
			    -webkit-border-image: url("img/inset_round.png") 30 30 stretch; /* Safari and Chrome */
			    -o-border-image: url("img/inset_round.png") 30 30 stretch; /* Opera */
			    -border-image: url("img/inset_round.png") 30 30 stretch;
			}
			
			.outset {
			    position: absolute;
			    top: 0px;
			    left: 0px;
			    -moz-border-image: url("img/outset_round.png") 30 30 stretch; /* Firefox */
			    -webkit-border-image: url("img/outset_round.png") 30 30 stretch; /* Safari and Chrome */
			    -o-border-image: url("img/outset_round.png") 30 30 stretch; /* Opera */
			    -border-image: url("img/outset_round.png") 30 30 stretch;
			}
			
			.outerglow {
			    position: absolute;
			    top: 0px;
			    left: 0px;
			    -moz-border-image: url("img/outer_glow.png") 30 30 stretch; /* Firefox */
			    -webkit-border-image: url("img/outer_glow.png") 30 30 stretch; /* Safari and Chrome */
			    -o-border-image: url("img/outer_glow.png") 30 30 stretch; /* Opera */
			    -border-image: url("img/outer_glow.png") 30 30 stretch;
			}
			
			.calendar .innershadow {
			    border: 2em;
			    opacity: .9;
			}
			
			.project {
			    margin: .5em 0 0 0;
			}
			
			.name {
			    margin: 0 0 0 .5em;
			    ooverflow: hidden;
			}
			
			.name .inset {
			    border: .4em;
			}
			
			.name span {
			    padding: 0 .7em;
			    color: #ffffff;
			    line-height: 200%;
			    font-size: 75%;
			    font-weight: bold;
			    text-align: right;
			    text-shadow: 0 0 .5em #000000;
			    text-transform: uppercase;
			}
			
			.progress {
			    margin: 0 0 0 .5em;
			}
			
			.progress .inset {
			    border: .4em;
			}
			
			.progress .outset {
			    border: .4em;
			    opacity: .5;
			}
			
			.progress .innershadow {
			    border: .4em;
			    opacity: .5;
			}
			
			.progress .bar {
			    min-width: 1em;
			     background-image: -moz-linear-gradient(center left,rgb(255,0,0) 0%,rgb(0,0,255) 50%,rgb(0,255,0) 100%);
			}
			
			.progress .bar span {
			    padding: 0 .7em;
			    color: #ffffff;
			    line-height: 200%;
			    font-size: 75%;
			    font-weight: bold;
			    text-align: right;
			    text-shadow: 0 0 .5em #000000;
			}
			
			.red {
			    background-color: #ff6600;
			}
			
			.green {
			    background-color: #66cc00;
			}
			
			.blue {
			    background-color: #0066ff;
			}
			
			.round {
			    -moz-border-radius: .5em;
			}
			
			.users {
			    margin: 0 0 0 .5em;
			}
			
			.users .gravatar {
			    display: inline-block;
			    margin: 0 .2em;
			}
			
			.users img {
			    height: 1.5em;
			    width: 1.5em;
			}
			
			.users .outerglow {
			    border: .5em;
			    margin: -.5em;
			    opacity: .2;
			}
			
		</style>
		<script type="text/javascript" src="js/jquery.min.js"></script>
		<script type="text/javascript">
			
			(function($){
				$.fn.extend({
					inflate: function(data){
						var defaults = {
							width: 1,
							height: 1,
						};
						
						var options = $.extend(defaults, data);
						
						var methods = {
							init: function(){
								this.each(function(){
									$(this).data('inflate', {
										oldStyle: $(this).attr('style')
									});
									options.width && $(this).css('width', options.width * ($(this).parent().width() - $(this).outerWidth(true) + $(this).width()) + 'px');
									options.height && $(this).css('height', options.height * ($(this).parent().height() - $(this).outerHeight(true) + $(this).height()) + 'px');
								});
							},
							destroy: function(){
								this.each(function(){
									$(this).data('inflate') && $(this).removeAttr('style').attr('style', $(this).data('inflate').oldStyle);
								});
							},
						};
						
						switch (typeof data) {
							case 'string':
								if (data in methods) {
									methods[data].call(this)
								}
								else {
									$.error('Method ' + data + ' does not exist');
								}
								break;
								
							case 'object':
							default:
								methods['init'].call(this)
								break;
						}
						
						return this;
					}
				});
				
				$.fn.extend({
					autoUpdate: function(data){
						var options = {
							manual: true,
							interval: 1000,
							success: function(elem){
								//console.log('success');
							},
							error: function(elem){
								//console.log('error');
							},
						};
						
						var methods = {
							init: function(){
								////console.log('init');
								if (this.data('autoUpdate')) {
									var settings = $.extend(this.data('autoUpdate'), data);
								}
								else {
									var settings = $.extend({}, options, data);
								}
								
								this.data('autoUpdate', settings);
								
								settings.manual || methods['start'].call(this);
							},
							
							start: function(){
								////console.log('start');
								var settings = this.data('autoUpdate'), elem = this;
								if (!settings || settings.manual) 
									return;
								
								window.k = new Array();
								window.s = new Array();
								window.s.push(settings);
								
								clearTimeout(settings._tid);
								
								(function(){
									////console.log('lambda');
									var lambda = arguments.callee;
									
									window.k.push(lambda);
									
									////console.log('lambda: new dfd');
									settings._dfd = new jQuery.Deferred();
									
									jQuery.when(settings._dfd).always(function(name){
										settings._tid = setTimeout(lambda, settings.interval);
									});
									
									methods['update'].call(elem);
									
								})();
							},
							
							stop: function(){
								var settings = this.data('autoUpdate');
								if (!settings) 
									return;
								
								settings._dfd && settings._dfd.reject()
								
								clearTimeout(settings._tid);
							},
							
							update: function(){
							
								////console.log('update');
								var settings = this.data('autoUpdate'), elem = this;
								if (!settings) 
									return;
								
								
								//console.log('update ' + elem.get(0).tagName + elem.index());
								clearTimeout(settings._tid);
								
								if (!settings._dfd || settings._dfd.isResolved() || settings._dfd.isRejected()) {
									////console.log('update: new dfd');
									settings._dfd = new jQuery.Deferred()
								}
								
								jQuery.when(settings._dfd).then(settings.success, settings.error);
								
								////console.log('starting AJAX in ' + $(elem).get(0).tagName);
								
								// это эмуляция AJAX'а
								setTimeout(function(){
									////console.log('ajax ' + elem.get(0).tagName + elem.index());
									//settings._dfd.resolve($(elem).get(0).tagName);									
									Math.random() > .5 ? settings._dfd.resolve(elem) : settings._dfd.reject(elem);
									////console.log('AJAX resolved in ' + $(elem).get(0).tagName);
								}, Math.round(Math.random() * 1000));
							},
							
							destroy: function(){
								methods['update'].call(this);
								this.removeData('autoUpdate');
							},
						};
						
						switch (typeof data) {
							case 'string':
								if (data in methods) {
									this.each(function(){
										methods[data].call($(this));
									});
								}
								else {
									$.error('Method ' + data + ' does not exist');
								}
								break;
								
							case 'object':
							default:
								this.each(function(){
									methods['init'].call($(this))
								});
								break;
						}
						return this;
					}
				});
			})(jQuery);
			
			$(function(){
				/*
				 * font-size constraints page size
				 */
				//alert(typeof 'sd');
				
				$(window).bind('resize', function(){
					$('body').css('font-size', $(document).width() / 80 + 'px');
					
					$('.full').inflate();
					
					$('.fullw').inflate({
						height: 0
					});
					$('.fullh').inflate({
						width: 0
					});
				}).trigger('resize');
				
				$('.progress.test').bind('test', function(){
					percent = $(this).data('test') ? $(this).data('test') % 100 : 0;
					percent >= 0 && (class = 'red');
					percent > 33 && (class = 'blue');
					percent > 66 && (class = 'green');
					$(this).find('.bar').css({
						width: percent + '%',
						background: 'rgb(' + Math.round(255 - 255 / 100 * percent) + ',' + Math.round(255 / 100 * percent) + ',0)'
					}).removeClass('red green blue').addClass(class).find('span').text(percent + '%');
					$(this).find('.full').inflate();
					$(this).data('test', ++percent);
					setTimeout("$('.progress.test').trigger('test');", 100);
				}).trigger('test');
				
				$('.gravatar .outerglow').autoUpdate({
					manual: false,
					interval: 2000,
					success: function(elem){
						//console.log('success ' + elem.get(0).tagName + elem.index());
						elem.animate({
							opacity: 1
						}, 500);
					},
					error: function(elem){
						//console.log('error' + elem.get(0).tagName + elem.index());
						elem.animate({
							opacity: 0
						}, 500);
					},
				});
			});
			
			
			
		</script>
	</head>
	<body link="t1.html">
		<div class="outer full">
			<div class="left fullh">
				<div class="project">
					<div class="name" style="display:inline-block;width:20%">
						<div class="inset full" style="width:100%;"></div>
						<span>site.ru</span>
					</div>
					<div class="progress test" style="display:inline-block;width:50%">
						<div class="inset full" style="width:101%;"></div>
						<div class="bar round green" style="width:33%">
							<span>33%</span>
							<div class="outset round full"></div>
						</div>
					</div>
					<div class="users" style="display:inline-block;width:20%">
						<div class="gravatar">
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
							<div class="outerglow full"></div>
						</div>
						<div class="gravatar">
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
							<div class="outerglow full"></div>
						</div>
						<div class="gravatar">
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
							<div class="outerglow full"></div>
						</div>
						<div class="gravatar">
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
							<div class="outerglow full"></div>
						</div>
					</div>
				</div>
				<div class="project">
					<div class="name" style="display:inline-block;width:20%">
						<div class="inset full" style="width:100%;"></div>
						<span>site.ru</span>
					</div>
					<div class="progress" style="display:inline-block;width:50%">
						<div class="inset full" style="width:100%;"></div>
						<div class="bar round green" style="width:33%">
							<span>33%</span>
							<div class="outset round full"></div>
						</div>
					</div>
					<div class="users" style="display:inline-block;width:20%">
						<div class="gravatar">
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
							<div class="outerglow full"></div>
						</div>
						<div class="gravatar">
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
							<div class="outerglow full"></div>
						</div>
						<div class="gravatar">
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
							<div class="outerglow full"></div>
						</div>
						<div class="gravatar">
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
							<div class="outerglow full"></div>
						</div>
					</div>
				</div>
				<div class="project">
					<div class="name" style="display:inline-block;width:20%">
						<div class="inset full" style="width:100%;"></div>
						<span>site.ru</span>
					</div>
					<div class="progress" style="display:inline-block;width:50%">
						<div class="inset full" style="width:100%;"></div>
						<div class="bar round green" style="width:33%">
							<span>33%</span>
							<div class="outset round full"></div>
						</div>
					</div>
					<div class="users" style="display:inline-block;width:20%">
						<div class="gravatar">
							<div class="outerglow full"></div>
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
						</div>
						<div class="gravatar">
							<div class="outerglow full"></div>
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
						</div>
						<div class="gravatar">
							<div class="outerglow full"></div>
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
						</div>
						<div class="gravatar">
							<div class="outerglow full"></div>
							<img src="https://secure.gravatar.com/avatar/dbb17b1a40d86df9e28c38023a2df6bc"/>
						</div>
					</div>
				</div>
			</div>
			<div class="right fullh">
				<div class="layout fullh">
					<div class="calendar">
						<div class="time">22:22</div>
						<div class="date">чт, 7 апреля 1983</div>
						<div class="innershadow full"></div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
